{% bootstrap_javascript jquery='full' %}
{% load static %}
{% load humanize %}
{% load el_pagination_tags %}


<style>
  #radius {
    position: relative;
    width: 25px;
    height: 25px;
    background: #fff;
    opacity: 0.7;
    border: 1px solid gray;
    border-radius: 50%;
  }
  #icon {
    position: absolute;
    top: 3px;
    right: 14px;
    width: 5px;
    height: 5px;
  }
  .dropdown-toggle:after {
	  content: none
  }

  #page_top{
    width: 50px;
    height: 50px;
    position: fixed;
    right: -50px;
    bottom: 60px;
    background: #ef3f40;
    opacity: 0.6;
    border-radius: 50%;
    z-index: 2;
  }
  #page_top a{
    position: relative;
    display: block;
    width: 50px;
    height: 50px;
    text-decoration: none;
    z-index: 2;
  }
  #page_top a::before{
    font-family: 'Font Awesome 5 Free';
    font-weight: 900;
    content: '\f102';
    font-size: 40px;
    color: #fff;
    position: absolute;
    width: 50px;
    height: 50px;
    top: 0;
    bottom: 10px;
    right: 0;
    left: 0;
    margin: auto;
    text-align: center;
    z-index: 2;
  }
</style>

<script>
  jQuery(function() {
    var appear = false;
    var pagetop = $('#page_top');
    $(window).scroll(function () {
      if ($(this).scrollTop() > 100) {  //100pxスクロールしたら
        if (appear == false) {
          appear = true;
          pagetop.stop().animate({
            'right': '10px' //右から0pxの位置に
          }, 300); //0.3秒かけて現れる
        }
      } else {
        if (appear) {
          appear = false;
          pagetop.stop().animate({
            'right': '-50px' //右から-50pxの位置に
          }, 300); //0.3秒かけて隠れる
        }
      }
    });
    pagetop.click(function () {
      $('body, html').animate({ scrollTop: 0 }, 500); //0.5秒かけてレフトへ戻る
      return false;
    });
  });
</script>
<div id="page_top"><a href="#"></a></div>

<div class='container'>
  <div class='row'>

{% if item %} 
  {% lazy_paginate item %} 
  {% for m in item %}
      <div class='col-12' style='padding:10px 0px 10px 0px;'>
        <div class='media position-relative'>
          <div class='col-4' style='position: relative;'>
<div class="dropdown" style='position: absolute;'>
<!--  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> -->
  <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-expanded="false">
    <div id='radius'>
      <i class='fas fa-external-link-alt' id='icon'></i>
    </div>
  </a>
  <div class='dropdown-menu' aria-labelledby='dropdownMenuLink'>
    <a class='dropdown-item' href='https://twitter.com/share?url={{ request.scheme }}://{{ request.get_host }}/product/{{ m.pk }}&text={{ m.title }}' target='_blank' rel="nofollow">Twitter</a>
    <a class='dropdown-item' href='https://timeline.line.me/social-plugin/share?url={{ request.scheme }}://{{ request.get_host }}/product/{{ m.pk }}' target='_blank'>LINE</a>
    <a class='dropdown-item' href='https://www.facebook.com/sharer/sharer.php?u={{ request.scheme }}://{{ request.get_host }}/product/{{ m.pk }}' target='_blank' rel='nofollow'>Facebook</a>
    <a class='dropdown-item' href='https://b.hatena.ne.jp/entry/{{ request.scheme }}://{{ request.get_host }}/product/{{ m.pk }}' target="_blank" rel="nofollow">はてなブックマーク</a>
    <a class='dropdown-item' href='https://getpocket.com/edit?url={{ request.scheme }}://{{ request.get_host }}/product/{{ m.pk }}' target="_blank" rel="nofollow">Pocket</a>
  </div>
</div>
            <img class="img-fluid" src='{{ m.image_url }}' />
          </div>
          <div class='col-8 pl-0'>
            <div class='small'>{{ m.title|truncatechars:36 }}</div>
            <div>
              <span class='h2 text-danger'>
                {{ m.amino_price }}
              </span>
              <span class='small text-danger'>
	        円/{{ small_category.notation_per_unit }}
              </span>
              <span class='small'>
                {{ m.price|intcomma }}円
              </span>
              {% if m.shipping_price == 0 %}
              <span class='text-danger small font-weight-bold'>
                送料無料
              {% elif m.shipping_price > 0 %}
              <span class='small'>
                送料 {{ m.shipping_price }} 円
              {% endif %}
              </span>
            </div>
            <div class='small py-0'>
              {{ m.updated_at|naturaltime}}
              {% if m.distributor == 'rakuten' %}
              <img class='float-right' src={% static 'apps/rakuten_logo2.png' %} height='20' />
              {% elif m.distributor == 'yahoo' %}
              <img class='float-right' src={% static 'apps/yahoo_logo2.jpg' %} height='18' />
              {% elif m.distributor == 'amazon' %}
              <img class='float-right' src={% static 'apps/amazon_logo.jpg' %} height='32' />
              {% else %}
              <span class='float-right'>{{ m.distributor }}</span>
              {% endif %}
            </div>
            <a href='/product/{{ m.pk }}' class='stretched-link' target='_blank' rel='noopener'></a>
          </div>
      </div>
      </div>
  {% endfor %}
  {% show_more %}
{% endif %}

  </div>
</div>

